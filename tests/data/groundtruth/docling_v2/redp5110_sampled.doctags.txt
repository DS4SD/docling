<doctag><picture><loc_419><loc_16><loc_479><loc_35></picture>
<section_header_level_1><loc_29><loc_53><loc_480><loc_78>Row and Column Access Control</section_header_level_1>
<picture><loc_27><loc_185><loc_478><loc_443></picture>
<picture><loc_259><loc_448><loc_475><loc_489></picture>
<page_footer><loc_30><loc_474><loc_81><loc_483>ibm.com</page_footer>
<page_break>
<section_header_level_1><loc_53><loc_47><loc_138><loc_61>Contents</section_header_level_1>
<otsl><loc_111><loc_83><loc_447><loc_452></otsl>
<page_footer><loc_53><loc_477><loc_210><loc_482>' Copyright IBM Corp. 2014. All rights reserved.</page_footer>
<page_footer><loc_440><loc_477><loc_447><loc_482>iii</page_footer>
<page_break>
<text><loc_77><loc_93><loc_114><loc_98>Solution Brief</text>
<picture><loc_117><loc_171><loc_147><loc_180></picture>
<section_header_level_1><loc_118><loc_207><loc_154><loc_213>Highlights</section_header_level_1>
<unordered_list><list_item><loc_118><loc_218><loc_122><loc_221>/g115/g3</list_item>
<list_item><loc_118><loc_232><loc_122><loc_236>/g115/g3</list_item>
<list_item><loc_118><loc_251><loc_122><loc_255>/g115/g3</list_item>
<list_item><loc_118><loc_265><loc_122><loc_269>/g115/g3</list_item>
</unordered_list>
<picture><loc_52><loc_381><loc_211><loc_434></picture>
<text><loc_377><loc_87><loc_414><loc_92>Power Services</text>
<section_header_level_1><loc_229><loc_147><loc_298><loc_162>DB2 for i</section_header_level_1>
<text><loc_229><loc_173><loc_395><loc_182>Expert help to achieve your business requirements</text>
<section_header_level_1><loc_229><loc_199><loc_362><loc_204>We build confident, satisfied clients</section_header_level_1>
<text><loc_229><loc_207><loc_399><loc_211>No one else has the vast consulting experiences, skills sharing and</text>
<text><loc_229><loc_226><loc_301><loc_230>Because no one else is IBM.</text>
<text><loc_229><loc_238><loc_409><loc_243>With combined experiences and direct access to development groups,</text>
<section_header_level_1><loc_229><loc_276><loc_355><loc_281>Who we are, some of what we do</section_header_level_1>
<text><loc_229><loc_284><loc_355><loc_288>Global CoE engagements cover topics including:</text>
<unordered_list><list_item><loc_229><loc_297><loc_232><loc_301>rglyph<c=1,font=/NKDKKL+JansonTextLTStd-Roman></list_item>
<list_item><loc_229><loc_304><loc_232><loc_307>rglyph<c=1,font=/NKDKKL+JansonTextLTStd-Roman></list_item>
<list_item><loc_229><loc_310><loc_232><loc_313>rglyph<c=1,font=/NKDKKL+JansonTextLTStd-Roman></list_item>
<list_item><loc_229><loc_317><loc_232><loc_320>rglyph<c=1,font=/NKDKKL+JansonTextLTStd-Roman></list_item>
<list_item><loc_229><loc_323><loc_232><loc_326>rglyph<c=1,font=/NKDKKL+JansonTextLTStd-Roman></list_item>
<list_item><loc_229><loc_330><loc_232><loc_333>rglyph<c=1,font=/NKDKKL+JansonTextLTStd-Roman></list_item>
<list_item><loc_229><loc_336><loc_232><loc_339>rglyph<c=1,font=/NKDKKL+JansonTextLTStd-Roman></list_item>
<list_item><loc_229><loc_342><loc_232><loc_346>rglyph<c=1,font=/NKDKKL+JansonTextLTStd-Roman></list_item>
<list_item><loc_229><loc_349><loc_232><loc_352>rglyph<c=1,font=/NKDKKL+JansonTextLTStd-Roman></list_item>
</unordered_list>
<page_break>
<section_header_level_1><loc_53><loc_47><loc_124><loc_61>Preface</section_header_level_1>
<text><loc_112><loc_84><loc_444><loc_90>This IBMfi Redpaperâ„¢ publication provides information about the IBM i 7.2 feature of IBM</text>
<text><loc_112><loc_135><loc_428><loc_141>This paper is intended for database engineers, data-centric application developers, and</text>
<text><loc_112><loc_202><loc_447><loc_208>This paper was produced by the IBM DB2 for i Center of Excellence team in partnership with</text>
<picture><loc_116><loc_237><loc_205><loc_318></picture>
<text><loc_215><loc_237><loc_274><loc_243>Jim Bainbridge</text>
<picture><loc_119><loc_333><loc_206><loc_401></picture>
<text><loc_215><loc_333><loc_285><loc_339>Hernando Bedoya</text>
<section_header_level_1><loc_53><loc_182><loc_102><loc_191>Authors</section_header_level_1>
<page_footer><loc_53><loc_477><loc_210><loc_482>' Copyright IBM Corp. 2014. All rights reserved.</page_footer>
<page_footer><loc_440><loc_477><loc_447><loc_482>xi</page_footer>
<page_break>
<picture><loc_26><loc_45><loc_196><loc_150></picture>
<text><loc_409><loc_59><loc_427><loc_82>1</text>
<section_header_level_1><loc_112><loc_161><loc_449><loc_176>Securing and protecting IBM DB2</section_header_level_1>
<text><loc_112><loc_220><loc_443><loc_226>Recent news headlines are filled with reports of data breaches and cyber-attacks impacting</text>
<text><loc_112><loc_280><loc_429><loc_285>Businesses must make a serious effort to secure their data and recognize that securing</text>
<text><loc_112><loc_316><loc_447><loc_322>This chapter describes how you can secure and protect data in DB2 for i. The following topics</text>
<unordered_list><list_item><loc_112><loc_335><loc_116><loc_340>/SM590000</list_item>
<list_item><loc_112><loc_342><loc_116><loc_348>/SM590000</list_item>
<list_item><loc_112><loc_350><loc_116><loc_355>/SM590000</list_item>
</unordered_list>
<footnote><loc_112><loc_452><loc_120><loc_455>1</footnote>
<footnote><loc_112><loc_458><loc_118><loc_462>2</footnote>
<page_footer><loc_53><loc_477><loc_210><loc_482>' Copyright IBM Corp. 2014. All rights reserved.</page_footer>
<page_footer><loc_443><loc_477><loc_447><loc_482>1</page_footer>
<page_break>
<section_header_level_1><loc_53><loc_47><loc_218><loc_56>1.1  Security fundamentals</section_header_level_1>
<text><loc_112><loc_67><loc_445><loc_73>Before reviewing database security techniques, there are two fundamental steps in securing</text>
<unordered_list><list_item><loc_112><loc_86><loc_116><loc_91>/SM590000</list_item>
<list_item><loc_124><loc_119><loc_443><loc_125>The monitoring and assessment of adherence to the security policy determines whether</list_item>
</unordered_list>
<text><loc_124><loc_175><loc_443><loc_181>A security policy is what defines whether the system and its settings are secure (or not).</text>
<unordered_list><list_item><loc_112><loc_186><loc_116><loc_192>/SM590000</list_item>
</unordered_list>
<text><loc_112><loc_245><loc_437><loc_251>With your eyes now open to the importance of securing information assets, the rest of this</text>
<section_header_level_1><loc_53><loc_277><loc_264><loc_286>1.2  Current state of IBM i security</section_header_level_1>
<text><loc_112><loc_297><loc_433><loc_303>Because of the inherently secure nature of IBM i, many clients rely on the default system</text>
<text><loc_112><loc_334><loc_420><loc_340>Even more disturbing is that many IBM i clients remain in this state, despite the news</text>
<text><loc_112><loc_378><loc_447><loc_384>Traditionally, IBM i applications have employed menu-based security to counteract this default</text>
<page_footer><loc_53><loc_477><loc_59><loc_482>2</page_footer>
<page_footer><loc_72><loc_477><loc_268><loc_482>Row and Column Access Control Support in IBM DB2 for i</page_footer>
<page_break>
<text><loc_112><loc_45><loc_442><loc_51>Many businesses are trying to limit data access to a need-to-know basis. This security goal</text>
<section_header_level_1><loc_53><loc_109><loc_246><loc_117>1.3.1  Existing row and column control</section_header_level_1>
<text><loc_112><loc_126><loc_437><loc_132>Some IBM i clients have tried augmenting the all-or-nothing object-level security with SQL</text>
<text><loc_112><loc_170><loc_430><loc_176>Using SQL views to limit access to a subset of the data in a table also has its own set of</text>
<text><loc_112><loc_207><loc_438><loc_213>Even if you are willing to live with these performance and management issues, a user with</text>
<picture><loc_111><loc_237><loc_446><loc_435><caption><loc_112><loc_437><loc_259><loc_442>Figure 1-2   Existing row and column controls</caption></picture>
<page_footer><loc_53><loc_477><loc_59><loc_482>4</page_footer>
<page_footer><loc_72><loc_477><loc_268><loc_482>Row and Column Access Control Support in IBM DB2 for i</page_footer>
<page_break>
<section_header_level_1><loc_53><loc_45><loc_274><loc_53>2.1.6  Change Function Usage CL command</section_header_level_1>
<text><loc_112><loc_62><loc_447><loc_67>The following CL commands can be used to work with, display, or change function usage IDs:</text>
<unordered_list><list_item><loc_112><loc_73><loc_116><loc_78>/SM590000</list_item>
<list_item><loc_112><loc_80><loc_116><loc_85>/SM590000</list_item>
<list_item><loc_112><loc_88><loc_116><loc_93>/SM590000</list_item>
</unordered_list>
<text><loc_112><loc_101><loc_208><loc_107>For example, the following</text>
<text><loc_112><loc_120><loc_361><loc_125>CHGFCNUSG FCNID(QIBM_DB_SECADM) USER(HBEDOYA) USAGE(*ALLOWED)</text>
<section_header_level_1><loc_53><loc_138><loc_445><loc_146>2.1.7  Verifying function usage IDs for RCAC with the FUNCTION_USAGE view</section_header_level_1>
<text><loc_112><loc_155><loc_424><loc_161>The FUNCTION_USAGE view contains function usage configuration details. Table 2-1</text>
<otsl><loc_111><loc_183><loc_446><loc_279><caption><loc_112><loc_176><loc_232><loc_182>Table 2-1   FUNCTION_USAGE view</caption></otsl>
<text><loc_112><loc_286><loc_447><loc_291>To discover who has authorization to define and manage RCAC, you can use the query that is</text>
<caption><loc_112><loc_307><loc_378><loc_312>Example 2-1   Query to determine who has authority to define and manage RCAC</caption>
<text><loc_112><loc_318><loc_206><loc_323>SELECT     function_id,</text>
<text><loc_112><loc_341><loc_193><loc_346>user_type</text>
<text><loc_112><loc_348><loc_214><loc_354>FROM       function_usage</text>
<text><loc_112><loc_356><loc_271><loc_361>WHERE      function_id='QIBM_DB_SECADM'</text>
<text><loc_112><loc_364><loc_197><loc_369>ORDER BY   user_name;</text>
<section_header_level_1><loc_53><loc_392><loc_204><loc_401>2.2  Separation of duties</section_header_level_1>
<text><loc_112><loc_412><loc_432><loc_418>Separation of duties helps businesses comply with industry regulations or organizational</text>
<page_footer><loc_53><loc_477><loc_64><loc_482>10</page_footer>
<page_footer><loc_76><loc_477><loc_273><loc_482>Row and Column Access Control Support in IBM DB2 for i</page_footer>
<page_break>
<text><loc_112><loc_45><loc_443><loc_51>For example, assume that a business has assigned the duty to manage security on IBM i to</text>
<text><loc_112><loc_97><loc_445><loc_103>In IBM i 7.2, the QIBM_DB_SECADM function usage grants authorities, revokes authorities,</text>
<text><loc_112><loc_134><loc_440><loc_139>QIBM_DB_SECADM function usage can be granted only by a user with *SECADM special</text>
<text><loc_112><loc_155><loc_446><loc_161>QIBM_DB_SECADM also is responsible for administering RCAC, which restricts which rows</text>
<text><loc_112><loc_184><loc_436><loc_190>A preferred practice is that the RCAC administrator has the QIBM_DB_SECADM function</text>
<text><loc_112><loc_221><loc_444><loc_226>Table 2-2 shows a comparison of the different function usage IDs and *JOBCTL authority to</text>
<otsl><loc_53><loc_248><loc_447><loc_456><caption><loc_53><loc_242><loc_320><loc_247>Table 2-2    Comparison of the different function usage IDs and *JOBCTL authority</caption></otsl>
<page_footer><loc_290><loc_477><loc_428><loc_482>Chapter 2. Roles and separation of duties</page_footer>
<page_footer><loc_438><loc_477><loc_447><loc_482>11</page_footer>
<page_break>
<caption><loc_112><loc_45><loc_147><loc_51>The SQL</caption>
<picture><loc_111><loc_68><loc_446><loc_259><caption><loc_112><loc_261><loc_279><loc_267>Figure 3-1   CREATE PERMISSION SQL statement</caption></picture>
<section_header_level_1><loc_112><loc_278><loc_176><loc_285>Column mask</section_header_level_1>
<text><loc_112><loc_287><loc_443><loc_293>A column mask is a database object that manifests a column value access control rule for a</text>
<page_footer><loc_282><loc_477><loc_428><loc_482>Chapter 3. Row and Column Access Control</page_footer>
<page_footer><loc_438><loc_477><loc_447><loc_482>15</page_footer>
<page_break>
<caption><loc_112><loc_45><loc_337><loc_51>Table 3-1 summarizes these special registers and their values.</caption>
<otsl><loc_110><loc_65><loc_443><loc_129><caption><loc_112><loc_59><loc_304><loc_64>Table 3-1   Special registers and their corresponding values</caption></otsl>
<text><loc_112><loc_135><loc_440><loc_141>Figure 3-5 shows the difference in the special register values when an adopted authority is</text>
<unordered_list><list_item><loc_112><loc_154><loc_116><loc_159>/SM590000</list_item>
<list_item><loc_112><loc_165><loc_116><loc_170>/SM590000</list_item>
<list_item><loc_112><loc_175><loc_116><loc_181>/SM590000</list_item>
<list_item><loc_112><loc_194><loc_116><loc_199>/SM590000</list_item>
<list_item><loc_112><loc_220><loc_116><loc_225>/SM590000</list_item>
</unordered_list>
<picture><loc_111><loc_243><loc_246><loc_375><caption><loc_112><loc_377><loc_279><loc_382>Figure 3-5   Special registers and adopted authority</caption></picture>
<section_header_level_1><loc_53><loc_395><loc_202><loc_402>3.2.2  Built-in global variables</section_header_level_1>
<text><loc_112><loc_411><loc_423><loc_417>Built-in global variables are provided with the database manager and are used in SQL</text>
<text><loc_112><loc_433><loc_412><loc_439>IBM DB2 for i supports nine different built-in global variables that are read only and</text>
<page_footer><loc_282><loc_477><loc_428><loc_482>Chapter 3. Row and Column Access Control</page_footer>
<page_footer><loc_438><loc_477><loc_447><loc_482>19</page_footer>
<page_break>
<text><loc_112><loc_45><loc_280><loc_51>Table 3-2 lists the nine built-in global variables.</text>
<otsl><loc_52><loc_66><loc_448><loc_187><caption><loc_53><loc_59><loc_164><loc_64>Table 3-2   Built-in global variables</caption></otsl>
<section_header_level_1><loc_53><loc_203><loc_314><loc_213>3.3  VERIFY_GROUP_FOR_USER function</section_header_level_1>
<text><loc_112><loc_224><loc_444><loc_230>The VERIFY_GROUP_FOR_USER function was added in IBM i 7.2. Although it is primarily</text>
<text><loc_112><loc_283><loc_429><loc_289>If a special register value is in the list of user profiles or it is a member of a group profile</text>
<text><loc_112><loc_312><loc_375><loc_318>Here is an example of using the VERIFY_GROUP_FOR_USER function:</text>
<unordered_list><list_item><loc_112><loc_323><loc_119><loc_329>1.</list_item>
<list_item><loc_112><loc_334><loc_119><loc_339>2.</list_item>
<list_item><loc_112><loc_344><loc_119><loc_350>3.</list_item>
</unordered_list>
<code><loc_124><loc_363><loc_299><loc_368><_unknown_>VERIFY_GROUP_FOR_USER (CURRENT_USER, 'MGR')</code>
<code><loc_124><loc_378><loc_368><loc_383><_unknown_>VERIFY_GROUP_FOR_USER (CURRENT_USER, 'JANE', 'MGR', 'STEVE')</code>
<page_footer><loc_53><loc_477><loc_64><loc_482>20</page_footer>
<page_footer><loc_76><loc_477><loc_273><loc_482>Row and Column Access Control Support in IBM DB2 for i</page_footer>
<page_break>
<text><loc_112><loc_45><loc_136><loc_51>RETURN</text>
<text><loc_112><loc_53><loc_128><loc_58>CASE</text>
<code><loc_112><loc_61><loc_381><loc_66><_unknown_>WHEN VERIFY_GROUP_FOR_USER ( SESSION_USER , 'HR', 'EMP' ) = 1</code>
<unordered_list><list_item><loc_112><loc_174><loc_119><loc_180>2.</list_item>
<list_item><loc_124><loc_192><loc_129><loc_198>-</list_item>
<list_item><loc_124><loc_203><loc_129><loc_209>-</list_item>
<list_item><loc_124><loc_214><loc_129><loc_220>-</list_item>
<list_item><loc_124><loc_232><loc_129><loc_238>-</list_item>
<list_item><loc_124><loc_243><loc_433><loc_249>To implement this column mask, run the SQL statement that is shown in Example 3-9.</list_item>
</unordered_list>
<code><loc_112><loc_268><loc_312><loc_273><_unknown_>CREATE MASK   HR_SCHEMA.MASK_TAX_ID_ON_EMPLOYEES</code>
<caption><loc_112><loc_257><loc_288><loc_262>Example 3-9   Creating a mask on the TAX_ID column</caption>
<page_footer><loc_282><loc_477><loc_428><loc_482>Chapter 3. Row and Column Access Control</page_footer>
<page_footer><loc_438><loc_477><loc_447><loc_482>27</page_footer>
<unordered_list><page_break>
<list_item><loc_112><loc_45><loc_119><loc_51>3.</list_item>
</unordered_list>
<picture><loc_52><loc_60><loc_447><loc_107><caption><loc_53><loc_110><loc_239><loc_115>Figure 3-10   Column masks shown in System i Navigator</caption></picture>
<section_header_level_1><loc_53><loc_128><loc_167><loc_135>3.6.6  Activating RCAC</section_header_level_1>
<text><loc_112><loc_144><loc_439><loc_150>Now that you have created the row permission and the two column masks, RCAC must be</text>
<unordered_list><list_item><loc_112><loc_170><loc_119><loc_176>1.</list_item>
</unordered_list>
<section_header_level_1><loc_112><loc_184><loc_307><loc_189>Example 3-10   Activating RCAC on the EMPLOYEES table</section_header_level_1>
<unordered_list><list_item><loc_112><loc_195><loc_308><loc_200>/*   Active Row Access Control (permissions)  */</list_item>
<list_item><loc_112><loc_203><loc_308><loc_208>/*   Active Column Access Control (masks)     */</list_item>
</unordered_list>
<text><loc_112><loc_225><loc_238><loc_231>ACTIVATE COLUMN ACCESS CONTROL;</text>
<unordered_list><list_item><loc_112><loc_240><loc_119><loc_246>2.</list_item>
</unordered_list>
<picture><loc_52><loc_270><loc_433><loc_408><caption><loc_53><loc_410><loc_284><loc_415>Figure 3-11   Selecting the EMPLOYEES table from System i Navigator</caption></picture>
<page_footer><loc_53><loc_477><loc_64><loc_482>28</page_footer>
<page_footer><loc_76><loc_477><loc_273><loc_482>Row and Column Access Control Support in IBM DB2 for i</page_footer>
<unordered_list><page_break>
<list_item><loc_112><loc_45><loc_119><loc_51>2.</list_item>
<list_item><loc_112><loc_320><loc_119><loc_326>3.</list_item>
</unordered_list>
<picture><loc_112><loc_75><loc_446><loc_301><caption><loc_112><loc_303><loc_267><loc_309>Figure 4-68   Visual Explain with RCAC enabled</caption></picture>
<picture><loc_53><loc_349><loc_414><loc_419><caption><loc_53><loc_421><loc_186><loc_427>Figure 4-69   Index advice with no RCAC</caption></picture>
<page_footer><loc_175><loc_477><loc_428><loc_482>Chapter 4. Implementing Row and Column Access Control: Banking example</page_footer>
<page_footer><loc_438><loc_477><loc_447><loc_482>77</page_footer>
<page_break>
<code><loc_53><loc_45><loc_145><loc_50><_unknown_>THEN C . CUSTOMER_TAX_ID</code>
<code><loc_53><loc_351><loc_409><loc_356><_unknown_>CREATE MASK BANK_SCHEMA.MASK_SECURITY_QUESTION_ANSWER_ON_CUSTOMERS ON BANK_SCHEMA.CUSTOMERS AS C</code>
<page_footer><loc_53><loc_477><loc_69><loc_482>124</page_footer>
<page_footer><loc_81><loc_477><loc_277><loc_482>Row and Column Access Control Support in IBM DB2 for i</page_footer>
<page_break>
<section_header_level_1><loc_22><loc_48><loc_365><loc_65>Row and Column Access Control</section_header_level_1>
<text><loc_22><loc_153><loc_104><loc_160>Implement roles and</text>
<text><loc_125><loc_153><loc_339><loc_159>This IBM Redpaper publication provides information about the IBM i 7.2</text>
<text><loc_22><loc_179><loc_77><loc_186>Leverage row</text>
<text><loc_22><loc_215><loc_99><loc_221>Protect columns by</text>
<text><loc_125><loc_209><loc_339><loc_215>This paper is intended for database engineers, data-centric application</text>
<picture><loc_396><loc_16><loc_463><loc_34></picture>
<picture><loc_388><loc_51><loc_484><loc_120></picture>
<text><loc_382><loc_156><loc_457><loc_164>INTERNATIONAL</text>
<text><loc_382><loc_222><loc_467><loc_229>BUILDING TECHNICAL</text>
<text><loc_382><loc_252><loc_480><loc_259>IBM Redbooks are developed</text>
<text><loc_382><loc_365><loc_466><loc_372>For more information:</text>
<page_footer><loc_140><loc_399><loc_189><loc_404>REDP-5110-00</page_footer>
</doctag>